<html><head><meta charset=UTF-8><meta content=\"width=device-width,initial-scale=1\"name=viewport><title>Coffee Sensor Administration</title><link href=/assets/bootstrap.min.css rel=stylesheet><style>body,html{font-size:14px}body{background-color:#eef2f7}h1{font-weight:400;font-size:34px;line-height:40px}h2{font-weight:400;font-size:24px;line-height:32px}h3{font-weight:400;font-size:20px;line-height:28px}.layout{max-width:750px;margin:0 auto}.block{box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);padding:1em 2em;border-radius:3px;margin-bottom:1em;background:#fff}.block--no-padding{padding:0}.block:not(.block--no-padding)>h2,.block:not(.block--no-padding)>h3{margin-top:0}@media all and (max-width:720px){.btn-sm-block{display:block;width:100%}}</style></head><body><main class=container><div class=\"row justify-content-md-center\"><div class=\"col col-lg-9\"><div class=\"row my-5\"><div class=\"col col-md-10 col-sm-12\"><h1>Coffee Sensor Administration</h1></div></div><div class=row><div class=col><h2 class=my-3>System status</h2></div></div><div class=row><div class=col><div class=\"block block--no-padding\"><table class=table><thead class=thead-dark><tr><th colspan=2>Wi-Fi</th></tr></thead><tbody><tr><td>WiFi.status()<td id=data-wifi-status></td></tr></tbody><thead class=thead-dark><tr><th colspan=2>Memory</th></tr></thead><tbody><tr><td>ESP.getFreeHeap()</td><td id=data-free-heap></td></tr></tbody></table></div></div></div><div class=row><div class=col><h2 class=my-3>Wi-Fi configuration</h2></div></div><div class=row><div class=col><div class=block><div class=row><div class=col><form action=/persist/wifi enctype=application/x-www-form-urlencoded method=post><h3>Set Wi-fi client credentials</h3><hr><div class=form-group><label for=wifiSSID>SSID</label> <input class=form-control id=wifiSSID maxlength=32 name=wifi.ssid placeholder=\"Access Point name\"required minlength=1></div><div class=form-group><label for=wifiPassword>Password</label> <input class=form-control id=wifiPassword maxlength=63 name=wifi.password placeholder=Password required minlength=8 type=password></div><hr><div class=form-group><button class=\"btn btn-primary btn-sm-block\"type=submit>Save</button></div></form></div></div></div></div></div><div class=row><div class=col><h2 class=my-3>WebSocket configuration</h2></div></div><div class=row><div class=col><div class=block><div class=row><div class=col><form action=/persist/ws enctype=application/x-www-form-urlencoded method=post><h3>Set server WebSocket URL</h3><hr><div class=form-group><label for=websocketURL>SSID</label> <input class=form-control id=websocketURL maxlength=255 name=ws.url placeholder=wss://example.com:443/ws required></div><hr><div class=form-group><button class=\"btn btn-primary btn-sm-block\"type=submit>Save</button></div></form></div></div></div></div></div></div></div></main><script>(async()=>{const e=await fetch(\"/api/status\");if(200!==e.status)return void alert(`Server error, please see your browser's developer tools' network tab! Response code: ${e.status}`);let t;try{t=await e.json()}catch(e){return console.error(\"Malformed JSON\",e),void alert(\"Server sent malformed JSON! Please see your browser's developer tools' network tab.\")}const{wifiStatus:r,freeHeap:o,currentSavedSSID:a,currentPasswordLen:s,websocketURL:n}=t;document.getElementById(\"data-wifi-status\").innerText=r,document.getElementById(\"data-free-heap\").innerText=o>1e4?`${(o/1e3).toFixed(3)} KB`:`${o} B`;const l=document.getElementById(\"wifiSSID\"),d=document.getElementById(\"wifiPassword\"),u=document.getElementById(\"websocketURL\");l.value.length<=0&&a&&(l.value=a),s>0&&(d.placeholder=\"â€¢\".repeat(s>63?63:s)),u.value.length<=0&&n&&(u.value=n)})();</script></body></html>